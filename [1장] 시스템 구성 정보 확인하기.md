# 1.1 커널 정보 확인하기

커널 버전을 확인할 수 있는 방법은 여러가지다. 그중에서도 가장 대표적인 방법은 `uname` 명령을 사용하는 것으로, `uname -a` 명령을 입력하면 **커널 버전 관련 정보**가 나온다.

```bash
ubuntu@ip-172-31-0-157:~$ uname -a
Linux ip-172-31-0-157 6.14.0-1015-aws #15~24.04.1-Ubuntu SMP Tue Sep 23 22:44:48 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux
```

위 서버의 커널 버전은 6.14.0-1015-aws로, x86 계열의 64비트 운영체제를 사용하고 있음을 알 수 있다.

`dmesg` 명령을 사용해서 몇가지 정보를 더 확인해보자. `dmesg`는 커널의 디버그 메시지로, **커널이 부팅할 때 나오는 메시지와 운영중에 발생하는 메시지를 볼 수 있게 해주는 명령어**다. `dmesg`로 커널이 메모리를 인식하는 과정과 하드웨어를 인식하고 드라이버를 올리는 과정, 그리고 부팅 시 적용된 커널 파라미터 등을 확인할 수 있다.

```bash
ubuntu@ip-172-31-0-157:~$ sudo dmesg | grep -i kernel | more
[    0.000000] KERNEL supported cpus:
[    0.000000] platform_pci_unplug: Netfront and the Xen platform PCI driver have been compiled for this kernel: unplug emulated NICs.
[    0.000000] platform_pci_unplug: Blkfront and the Xen platform PCI driver have been compiled for this kernel: unplug emulated disks.
               in your root= kernel command line option
[    0.038855] Booting paravirtualized kernel on Xen HVM
[    0.040363] Kernel command line: BOOT_IMAGE=/vmlinuz-6.14.0-1015-aws root=PARTUUID=cd553419-794d-4da4-9ba5-c355f5f9f74d ro console=tty1 console=ttyS0 nvme_core.io_timeout=4294967295 panic=-1
[    0.040443] Unknown kernel command line parameters "BOOT_IMAGE=/vmlinuz-6.14.0-1015-aws", will be passed to user space.
[    0.044562] Kernel/User page tables isolation: enabled
[    1.201955] Memory: 951048K/1048180K available (21448K kernel code, 4578K rwdata, 15128K rodata, 5252K init, 4312K bss, 90452K reserved, 0K cma-reserved)
[    1.201955] DMA: preallocated 128 KiB GFP_KERNEL pool for atomic allocations
[    1.201955] DMA: preallocated 128 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations
[    1.201955] DMA: preallocated 128 KiB GFP_KERNEL|GFP_DMA32 pool for atomic allocations
[    1.788545] Loaded X.509 cert 'Build time autogenerated kernel key: b2dd1892589afbbb40cf0375596cc4d1b00e6512'
[    1.830209] Loaded X.509 cert 'Canonical Ltd. Kernel Module Signing: 88f752e560a1e0737e31163a466ad7b70a850c19'
[    2.014151] Loaded X.509 cert 'Build time autogenerated kernel key: b2dd1892589afbbb40cf0375596cc4d1b00e6512'
[    2.190778] Freeing unused kernel image (initmem) memory: 5252K
[    2.195917] Write protecting the kernel read-only data: 38912k
[    2.201622] Freeing unused kernel image (text/rodata gap) memory: 1076K
[    2.207979] Freeing unused kernel image (rodata/data gap) memory: 1256K
[    4.133466] systemd[1]: Listening on systemd-udevd-kernel.socket - udev Kernel Socket.
[    4.191436] systemd[1]: Mounting sys-kernel-debug.mount - Kernel Debug File System...
[    4.210458] systemd[1]: Mounting sys-kernel-tracing.mount - Kernel Trace File System...
[    4.355502] systemd[1]: Starting modprobe@configfs.service - Load Kernel Module configfs...
[    4.389465] systemd[1]: Starting modprobe@dm_mod.service - Load Kernel Module dm_mod...
[    4.424502] systemd[1]: Starting modprobe@drm.service - Load Kernel Module drm...
[    4.452526] systemd[1]: Starting modprobe@efi_pstore.service - Load Kernel Module efi_pstore...
[    4.470566] systemd[1]: Starting modprobe@fuse.service - Load Kernel Module fuse...
[    4.495496] systemd[1]: Starting modprobe@loop.service - Load Kernel Module loop...
[    4.549723] systemd[1]: Starting systemd-modules-load.service - Load Kernel Modules...
```

`dmesg`를 이용해 확인하는 커널 정보 외에 **현재 사용중인 커널의 컴파일 옵션**도 확인할 필요가 있다. 커널의 기능 중 컴파일 옵션에 포함이 되어야만 사용할 수 있는 기능들이 있기 때문이다.

```bash
root@ip-172-31-0-157:/home/ubuntu# cat /boot/config-`uname -r` | more
#
# Automatically generated file; DO NOT EDIT.
# Linux/x86_64 6.14.11 Kernel Configuration
#
CONFIG_CC_VERSION_TEXT="x86_64-linux-gnu-gcc-13 (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0"
CONFIG_CC_IS_GCC=y
CONFIG_GCC_VERSION=130300
CONFIG_CLANG_VERSION=0
CONFIG_AS_IS_GNU=y
CONFIG_AS_VERSION=24200
CONFIG_LD_IS_BFD=y
CONFIG_LD_VERSION=24200
CONFIG_LLD_VERSION=0
CONFIG_RUSTC_VERSION=108001
CONFIG_RUST_IS_AVAILABLE=y
CONFIG_RUSTC_LLVM_VERSION=180103
CONFIG_CC_CAN_LINK=y
CONFIG_CC_CAN_LINK_STATIC=y
CONFIG_CC_HAS_ASM_GOTO_OUTPUT=y
CONFIG_CC_HAS_ASM_GOTO_TIED_OUTPUT=y
CONFIG_TOOLS_SUPPORT_RELR=y
CONFIG_CC_HAS_ASM_INLINE=y
CONFIG_CC_HAS_NO_PROFILE_FN_ATTR=y
CONFIG_LD_CAN_USE_KEEP_IN_OVERLAY=y
CONFIG_PAHOLE_VERSION=125
CONFIG_IRQ_WORK=y
CONFIG_BUILDTIME_TABLE_SORT=y
CONFIG_THREAD_INFO_IN_TASK=y

#
# General setup
#
CONFIG_INIT_ENV_ARG_LIMIT=32
# CONFIG_COMPILE_TEST is not set
# CONFIG_WERROR is not set
CONFIG_LOCALVERSION=""
# CONFIG_LOCALVERSION_AUTO is not set
CONFIG_BUILD_SALT=""
CONFIG_HAVE_KERNEL_GZIP=y
CONFIG_HAVE_KERNEL_BZIP2=y
CONFIG_HAVE_KERNEL_LZMA=y
CONFIG_HAVE_KERNEL_XZ=y
CONFIG_HAVE_KERNEL_LZO=y
CONFIG_HAVE_KERNEL_LZ4=y
CONFIG_HAVE_KERNEL_ZSTD=y
# CONFIG_KERNEL_GZIP is not set
# CONFIG_KERNEL_BZIP2 is not set
# CONFIG_KERNEL_LZMA is not set
# CONFIG_KERNEL_XZ is not set
# CONFIG_KERNEL_LZO is not set
# CONFIG_KERNEL_LZ4 is not set
CONFIG_KERNEL_ZSTD=y
CONFIG_DEFAULT_INIT=""
CONFIG_DEFAULT_HOSTNAME="(none)"
CONFIG_VERSION_SIGNATURE="Ubuntu 6.14.0-1015.15~24.04.1-aws 6.14.11"
CONFIG_SYSVIPC=y
CONFIG_SYSVIPC_SYSCTL=y
CONFIG_SYSVIPC_COMPAT=y
CONFIG_POSIX_MQUEUE=y
CONFIG_POSIX_MQUEUE_SYSCTL=y
CONFIG_WATCH_QUEUE=y
CONFIG_CROSS_MEMORY_ATTACH=y
CONFIG_USELIB=y
CONFIG_AUDIT=y
CONFIG_HAVE_ARCH_AUDITSYSCALL=y
CONFIG_AUDITSYSCALL=y

#
# IRQ subsystem
#
CONFIG_GENERIC_IRQ_PROBE=y
CONFIG_GENERIC_IRQ_SHOW=y
CONFIG_GENERIC_IRQ_EFFECTIVE_AFF_MASK=y
CONFIG_GENERIC_PENDING_IRQ=y
CONFIG_GENERIC_IRQ_MIGRATION=y
CONFIG_HARDIRQS_SW_RESEND=y
CONFIG_GENERIC_IRQ_CHIP=y
CONFIG_IRQ_DOMAIN=y
```

`ftrace`와 같이 커널 함수 레벨의 추적이 필요할 경우, `CONFIG_FUNCTION_TRACER`와 같은 몇몇 옵션들이 컴파일 옵션에 포함되어야 한다.

```bash
root@ip-172-31-0-157:/home/ubuntu# cat /boot/config-`uname -r` | grep -i config_function_tracer
CONFIG_FUNCTION_TRACER=y
```

# 1.2 CPU 정보 확인하기

리눅스에서는 `dmidecode` 명령을 통해 하드웨어의 정보를 확인한다. `dmidecode` 명령만 입력하면 너무 많은 정보가 나오기 때문에 키워드를 사용해서 필요한 정보만 확인하는 것이 좋다. `man` 명령을 통해 살펴보면, `dmidecode` 명령에서 사용할 수 있는 키워드는 총 9가지가 있다.

```jsx
Additionally, type 126 is used for disabled entries and type 127 is an end-of-table marker. Types 128 to 255 are for OEM-specific data.  dmidecode will display these entries by default, but  it  can
only decode them when the vendors have contributed documentation or code for them.

Keywords can be used instead of type numbers with --type.  Each keyword is equivalent to a list of type numbers:

Keyword     Types
──────────────────────────────
bios        0, 13
system      1, 12, 15, 23, 32
baseboard   2, 10, 41
chassis     3
processor   4
memory      5, 6, 16, 17
cache       7
connector   8
slot        9
```

이 중에서 CPU와 BIOS의 정보를 확인하는데 필요한 키워드는 `bios`, `system`과 `processor`이다.

먼저 `bios` 키워드의 결과를 살펴보자.

```bash
root@ip-172-31-0-157:/home/ubuntu# dmidecode -t bios
# dmidecode 3.5
Getting SMBIOS data from sysfs.
SMBIOS 2.7 present.

Handle 0x0000, DMI type 0, 24 bytes
BIOS Information
        Vendor: Xen
        Version: 4.11.amazon
        Release Date: 08/24/2006
        Address: 0xE8000
        Runtime Size: 96 kB
        ROM Size: 64 kB
        Characteristics:
                PCI is supported
                EDD is supported
                Targeted content distribution is supported
        BIOS Revision: 4.11
```

`bios` 키워드는 보통 특정 BIOS 버전에 문제가 있다는 보고가 있고, 내가 사용하는 버전이 이 버전에 해당하는지를 확인할 때 주로 사용한다. 위 정보를 보면 이 서버는 Xen에서 만든 서버이며, BIOS 버전은 2006/08/24에 발표된 4.11.amazon버전이고, BIOS 버전은 4.11 버전이다.

```bash
root@ip-172-31-0-157:/home/ubuntu# dmidecode -t system
# dmidecode 3.5
Getting SMBIOS data from sysfs.
SMBIOS 2.7 present.

Handle 0x0100, DMI type 1, 27 bytes
System Information
        Manufacturer: Xen
        Product Name: HVM domU
        Version: 4.11.amazon
        Serial Number: ec2cb7b3-daf8-74c2-6305-b8ff60aede4a
        UUID: ec2cb7b3-daf8-74c2-6305-b8ff60aede4a
        Wake-up Type: Power Switch
        SKU Number: Not Specified
        Family: Not Specified

Handle 0x2000, DMI type 32, 11 bytes
System Boot Information
        Status: No errors detected
```

위 결과는 `dmidecode` 명령 중에 가장 많이 사용하는 키워드인 `system` 이다. 장비는 Xen에서 만든 HVM domU 모델이다. 장비의 모델명은 어떤 제조사에서 만들었느냐만큼이나 중요한 정보이다. 모델명을 통해서 해당 장비가 어느 정도의 성능을 낼 수 있는지 확인할 수 있기 때문이다.

```bash
root@ip-172-31-0-157:/home/ubuntu# dmidecode -t processor
# dmidecode 3.5
Getting SMBIOS data from sysfs.
SMBIOS 2.7 present.

Handle 0x0401, DMI type 4, 35 bytes
Processor Information
        Socket Designation: CPU 1
        Type: Central Processor
        Family: Other
        Manufacturer: Intel
        ID: F1 06 04 00 FF FB 8B 17
        Version: Not Specified
        Voltage: Unknown
        External Clock: Unknown
        Max Speed: 2300 MHz
        Current Speed: 2300 MHz
        Status: Populated, Enabled
        Upgrade: Other
        L1 Cache Handle: Not Provided
        L2 Cache Handle: Not Provided
        L3 Cache Handle: Not Provided
        Serial Number: Not Specified
        Asset Tag: Not Specified
        Part Number: Not Specified
```

위 결과는 `processor` 키워드의 결과로, 장비의 CPU 정보를 확인할 수 있다.

CPU에 대한 정보는 `lscpu` 명령을 이용해서도 확인할 수 있다.

# 1.3 메모리 정보 확인하기

`dmidecode`의 키워드들 중 `memory` 키워드로 각 메모리 슬롯에 있는 메모리의 정보 및 제조사까지 확인할 수 있다.

`memory` 키워드는 크게 Physical Memory Array와 Memory Device의 두 영역으로 나눌 수 있다.

**Physical Memory Array는 하나의 CPU 소켓에 함께 할당된 물리 메모리의 그룹**을 의미한다. 최근의 프로세서는 NUMA라는 개념을 이용해 각각의 CPU가 사용할 수 있는 로컬 메모리를 제공한다. Physical Memory Array는 바로 이 개념에서 시작하며, 우리가 지금 보고 있는 시스템은 2개의 CPU 소켓이 있는 서버이기 때문에 Physical memory Array도 2개가 있다. 그리고 각각의 Physical Memory Array는 총 9개의 메모리를 꽂을 수 있으며 최대로 꽂을 수 있는 양은 192GB이다.

Memory Device는 실제로 시스템에 꽂혀있는 메모리를 의미하며, 메모리의 용량이 얼마인지, 제조사는 어디인지 볼 수 있다.

# 1.4 디스크 정보 확인하기

아래 코드는 `df` 명령의 결과이다.

```jsx
df -h

Filesystem     Size    Used    Avail    Use%  Mounted on
/dev/sda1.     20G.    19G.    543M.    98%.  /
...
```

위 서버는 총 3개의 파티션이 있으며, 각각의 파티션은 `/`, `/data`, `/data2`에 마운트되어 있다. 또한, 디스크는 `/dev/vda` 라는 이름으로 시스템에 네이밍되어 있다. 디스크의 방식에 따라서 `/dev/hda`일 수도 있고 `/dev/vda`일 수도 있다.

`sda`와 `hda`의 차이점을 살펴보자. 시스템이 디스크와 통신하기 위해
